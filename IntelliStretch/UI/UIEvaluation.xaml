<UserControl x:Class="IntelliStretch.UI.UIEvaluation"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"    
    xmlns:UserControls="clr-namespace:IntelliStretch.UserControls"
    xmlns:value_converters="clr-namespace:IntelliStretch.ValueConverters"
    xmlns:ScottPlot="clr-namespace:ScottPlot.WPF;assembly=ScottPlot.WPF"
    x:Name="uiEvaluation" >
    <UserControl.Resources>        
        <ResourceDictionary>
            <value_converters:BoolVisibilityConverter x:Key="bvConverter" />
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Resources/TabPanelStyle.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
        
    </UserControl.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Grid.RowSpan="2" Panel.ZIndex="-2" CornerRadius="5" Background="{DynamicResource SecondaryBlueColor}">
            </Border>

            <StackPanel Grid.Row="0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="{Binding SelectedItem.Tag, ElementName=tabEvaluation}" Margin="10,20,10,10" TextWrapping="Wrap" Foreground="{DynamicResource PrimaryTextColor}" FontSize="28" FontWeight="DemiBold" HorizontalAlignment="Center"/>
                    <Border Panel.ZIndex="-1" Grid.Row="0" Background="{DynamicResource PrimaryBlueColor}" CornerRadius="5,5,0,0"/>

                    <UserControls:ImageButton Grid.Row="1" x:Name="btnMeasure" ButtonCornerRadius="5" Foreground="{DynamicResource PrimaryTextColor}" BackColor="{DynamicResource PrimaryGrayColor}" Width="168" VerticalAlignment="Top" Height="60" Image="../images/Start-new.png" ImageMargin="10" Orientation="Horizontal" Text="Measure " FontSize="24" Click="btnMeasure_Click" Margin="0,20"/>
                </Grid>
            </StackPanel>

            <StackPanel  Grid.Row="1" VerticalAlignment="Bottom">
                <StackPanel Visibility="{Binding IsSelected, ElementName=tabStrength, Converter={StaticResource bvConverter}, ConverterParameter=true}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="EMG" Margin="15,10,0,0" VerticalAlignment="Bottom" FontWeight="DemiBold" FontSize="24" Foreground="{DynamicResource TertiaryTextColor}"/>
                        <UserControls:UserCheckBox Grid.Column="1" x:Name="cbDisplayEmg" Height="36" CheckBorderThickness="2" BrushColor="{DynamicResource SecondaryGrayColor}" IsChecked="False" FontSize="20" Margin="0,0,0,0" VerticalAlignment="Center" CheckToggled="cbDisplayEmg_Changed" Foreground="{DynamicResource TertiaryTextColor}" HorizontalAlignment="Right"/>
                    </Grid>

                    <Rectangle Height="2" Fill="{DynamicResource TertiaryTextColor}" Margin="10,0"/>

                    <StackPanel Margin="40,10,20,10" >

                        <UserControls:FlatToggleButton
                            x:Name="btnRecord"
                            Text="Record"
                            FontSize="20"
                            Height="40"
                            Width="120"
                            Visibility="Collapsed"/>
                    </StackPanel>
                </StackPanel>
                <StackPanel Visibility="{Binding IsSelected, ElementName=tabStrength, Converter={StaticResource bvConverter}, ConverterParameter=true}">
                    <TextBlock Text="Measure" Margin="15,10,0,0" VerticalAlignment="Bottom" FontWeight="DemiBold" FontSize="24" Foreground="{DynamicResource TertiaryTextColor}"/>
                    <Rectangle Height="2" Fill="{DynamicResource TertiaryTextColor}" Margin="10,0"/>

                    <StackPanel Margin="40,10,20,10">
                        <UserControls:FlatToggleButton x:Name="btnFlexion" Height="40" Width="160" FontSize="20" Margin="0,0,0,10" Text="Dorsiflexion" IsChecked="True" Click="btnFlexion_Click"/>
                        <UserControls:FlatToggleButton x:Name="btnExtension" Height="40" Width="160" FontSize="20" Text="Plantarflexion" Click="btnExtension_Click"/>
                    </StackPanel>
                </StackPanel>
                <StackPanel Visibility="{Binding IsSelected, ElementName=tabStrength, Converter={StaticResource bvConverter}, ConverterParameter=true}">
                    <TextBlock Text="Device" Margin="15,10,0,0" VerticalAlignment="Bottom" FontWeight="DemiBold" FontSize="24" Foreground="{DynamicResource TertiaryTextColor}"/>
                    <Rectangle Height="2" Fill="{DynamicResource TertiaryTextColor}" Margin="10,0"/>

                    <StackPanel Margin="40,10,20,10">
                        <UserControls:FlatToggleButton x:Name="btnBackdrivable" Height="40" Width="120" FontSize="20" Margin="0,0,0,10" Text="Unlock" IsChecked="True" Click="btnBackdrivable_Click"/>
                        <UserControls:FlatToggleButton x:Name="btnLock" Height="40" Width="120" FontSize="20" Text="Lock" Click="btnLock_Click"/>
                    </StackPanel>
                </StackPanel>

            </StackPanel>
        </Grid>

        <Grid Grid.Column="1">
            <TabControl x:Name="tabEvaluation" Margin="0,30,0,20" TabStripPlacement="Right" Background="{x:Null}" Style="{StaticResource RightTabStyle}" SelectionChanged="tabEvaluation_SelectionChanged">
                <!-- AROM -->
                <TabItem x:Name="tabAROM" Style="{StaticResource BtnTabItemStyle}" Tag="Active Range of Motion (AROM)">
                    <TabItem.Header>
                        <Image Source="../images/Range-new.png" Margin="5"/>
                    </TabItem.Header>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="60" />
                        </Grid.RowDefinitions>
                        
                        <Grid x:Name="vAROMLayout" Grid.Row="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="300"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition Width="400"></ColumnDefinition>
                            </Grid.ColumnDefinitions>

                            <UserControls:VerticalRangeFinder 
                                x:Name="vAROM" 
                                Grid.Row="0"
                                Grid.RowSpan="2"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Margin="0, 20" 
                                HorizontalAlignment="Center" 
                                FlexionName="{Binding FlexionName, ElementName=uiEvaluation}"
                                ExtensionName="{Binding ExtensionName, ElementName=uiEvaluation}"/>

                            <Grid Grid.Row="0" Grid.Column="2" x:Name="arom_v_flexionGrid" Margin="5,25"  HorizontalAlignment="Center" Cursor="Arrow">

                                <Border Grid.Row="0" Background="#E6000000" BorderThickness="5" CornerRadius="5" BorderBrush="{DynamicResource SecondaryGrayColor}"/>
                                <Image Grid.Row="0" Source="{Binding Path=FlexionImage, ElementName=uiEvaluation}"/>

                            </Grid>

                            <Grid Grid.Row="1" Grid.Column="2" x:Name="arom_v_extensionGrid" Margin="5,25"  HorizontalAlignment="Center" Cursor="Arrow">
                                <Border Background="#E6000000" BorderThickness="5" CornerRadius="5" BorderBrush="{DynamicResource SecondaryGrayColor}"/>
                                <Image Source="{Binding Path=ExtensionImage, ElementName=uiEvaluation}"/>
                            </Grid>


                        </Grid>
                        <Grid x:Name="hAROMLayout" Grid.Row="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>


                            <UserControls:HorizontalRangeFinder
                                Grid.Row="1"
                                Grid.ColumnSpan="2"
                                x:Name="hAROM"
                                Margin="20,50,50,20" 
                                FlexionName="{Binding FlexionName, ElementName=uiEvaluation}"
                                ExtensionName="{Binding ExtensionName, ElementName=uiEvaluation}"/>


                            <Grid Grid.Row="0" Grid.Column="1" x:Name="arom_h_flexionGrid" Margin="5,25"  HorizontalAlignment="Center">
                                <Border Background="#E6000000" BorderThickness="5" CornerRadius="5" BorderBrush="{DynamicResource SecondaryGrayColor}"/>
                                <Image Source="{Binding Path=FlexionImage, ElementName=uiEvaluation}"/>

                            </Grid>

                            <Grid Grid.Row="1" Grid.Column="1" x:Name="arom_h_extensionGrid" Margin="5,25"  HorizontalAlignment="Center">
                                <Grid.RowDefinitions>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>

                                <Border Background="#E6000000" BorderThickness="5" CornerRadius="5" BorderBrush="{DynamicResource SecondaryGrayColor}"/>
                                <Image Source="{Binding Path=FlexionImage, ElementName=uiEvaluation}"/>

                            </Grid>
                        </Grid>
                        <UserControls:TextSlider Grid.Row="1" x:Name="sliderResistance" Foreground="{DynamicResource TertiaryTextColor}" TextFontSize="22" Text="Resistance" UserControls:TextSlider.ValueChanged="sliderResistance_ValueChanged"/>
                        <!--<UniformGrid Grid.Row="1" Grid.ColumnSpan="2" Columns="2" UserControls:TextSlider.ValueChanged="sliderResistance_ValueChanged">-->
                            <!--<UserControls:TextSlider x:Name="sliderResistFlex" Foreground="{DynamicResource TertiaryTextColor}" TextFontSize="22" Text="{Binding Path=FlexionName, ElementName=uiEvaluation, StringFormat={}{0} Resistance:}" />-->
                            <!--<UserControls:TextSlider x:Name="sliderResistExt" Foreground="{DynamicResource TertiaryTextColor}" TextFontSize="22" Text="{Binding Path=ExtensionName, ElementName=uiEvaluation, StringFormat={}{0} Resistance:}" />-->
                        <!--</UniformGrid>-->
                    </Grid>
                </TabItem>
                <!-- Strength -->
                <TabItem x:Name="tabStrength" Style="{StaticResource BtnTabItemStyle}" Tag="Strength Measure" VerticalAlignment="Top">
                    <TabItem.Header>
                        <Image Source="../images/Strength-new.png"  Margin="1"/>
                    </TabItem.Header>
                    <Grid>
                        <Grid x:Name="vStrengthLayout">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="60" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="300"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition Width="400"></ColumnDefinition>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Row="0" Grid.Column="2" x:Name="strength_v_FlexionGrid" Margin="5,25"  HorizontalAlignment="Center">
                                <Border Grid.Row="0" Background="#E6000000" BorderThickness="5" CornerRadius="5" BorderBrush="{DynamicResource SecondaryGrayColor}"/>
                                <Image Grid.Row="0" Source="{Binding Path=FlexionImage, ElementName=uiEvaluation}"/>

                            </Grid>

                            <Grid Grid.Row="1" Grid.Column="2" x:Name="strength_v_ExtensionGrid" Margin="5,25"  HorizontalAlignment="Center">
                                <Border Grid.Row="0" Background="#E6000000" BorderThickness="5" CornerRadius="5" BorderBrush="{DynamicResource SecondaryGrayColor}"/>
                                <Image Grid.Row="1" Source="{Binding Path=ExtensionImage, ElementName=uiEvaluation}" Visibility="Visible"/>
                            </Grid>

                            <ScottPlot:WpfPlot
                                Grid.Row="0"
                                Grid.Column="1"
                                x:Name="vPlot1"
                                Background="Transparent"
                                FontSize="24"
                                Margin="20,20,0,20"
                                Visibility="Collapsed"/>
                            <ScottPlot:WpfPlot
                                Grid.Row="1" 
                                Grid.Column="1"
                                x:Name="vPlot2" 
                                Background="Transparent"
                                FontSize="24" 
                                Margin="20,20,0,20"
                                Visibility="Collapsed"/>
                            <UserControls:VerticalRangeFinder 
                                Grid.Row="0"
                                Grid.RowSpan="2" 
                                Grid.Column="0" 
                                Grid.ColumnSpan="2"
                                x:Name="vStrength" 
                                Margin="0, 20" 
                                HorizontalAlignment="Center"
                                FlexionName="{Binding FlexionName, ElementName=uiEvaluation}" 
                                ExtensionName="{Binding ExtensionName, ElementName=uiEvaluation}"/>
                            <UserControls:TextSlider
                                x:Name="sliderLockPosition"
                                Grid.Row="2"
                                Grid.ColumnSpan="3"
                                Margin="20,0"
                                Text="Lock Position:"
                                Foreground="{DynamicResource TertiaryTextColor}" 
                                TextFontSize="22"
                                ValueChanged="sliderLockPosition_ValueChanged"/>
                        </Grid>
                        <Grid x:Name="hStrengthLayout">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1.5*" />
                                <RowDefinition Height="1.5*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="60" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="400"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Row="1" Grid.Column="1" x:Name="strength_h_FlexionGrid" Margin="10"  HorizontalAlignment="Center">
                                <Border Grid.Row="0"  Background="#E6000000" BorderThickness="5" CornerRadius="5" BorderBrush="{DynamicResource SecondaryGrayColor}"/>
                                <Image Source="{Binding Path=FlexionImage, ElementName=uiEvaluation}"/>
                            </Grid>

                            <Grid Grid.Row="1" Grid.Column="0" x:Name="strength_h_ExtensionGrid" Margin="10" HorizontalAlignment="Center">
                                <Border Grid.Row="0" Background="#E6000000" BorderThickness="5" CornerRadius="5" BorderBrush="{DynamicResource SecondaryGrayColor}"/>
                                <Image Grid.Row="1" Source="{Binding Path=ExtensionImage, ElementName=uiEvaluation}" Visibility="Visible"/>
                            </Grid>

                            <ScottPlot:WpfPlot
                                Grid.Row="0"
                                Grid.Column="1"
                                x:Name="hPlot1"
                                Margin="20,20,0,20"/>
                            <ScottPlot:WpfPlot
                                Grid.Row="1" 
                                Grid.Column="1"
                                x:Name="hPlot2" 
                                Margin="20,20,0,20"/>
                            <UserControls:HorizontalRangeFinder
                                Grid.Row="2"
                                Grid.ColumnSpan="3"
                                x:Name="hStrength"
                                Margin="20,50,50,20"
                                HorizontalAlignment="Stretch"
                                FlexionName="{Binding Path=FlexionName, ElementName=uiEvaluation}"
                                ExtensionName="{Binding Path=ExtensionName, ElementName=uiEvaluation}"/>
                            <UserControls:TextSlider
                                x:Name="hSliderLockPosition"
                                Grid.Row="3"
                                Grid.ColumnSpan="3"
                                Margin="20,0"
                                Text="Lock Position:"
                                Foreground="{DynamicResource TertiaryTextColor}" 
                                TextFontSize="22"
                                ValueChanged="sliderLockPosition_ValueChanged"/>
                        </Grid>
                    </Grid>
                </TabItem>
            </TabControl>
        </Grid>       
        
    </Grid>
</UserControl>
